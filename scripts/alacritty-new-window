#!/usr/bin/env nu

# Open a new Alacritty window and optionally run a command in it.
def main [
  ...cmd: string        # Command to run in the new window
] {
  let flags = if ($cmd | length) > 0 {
    ['--command'] | append $cmd
  } else {
    []
  }

  if (ps | where name == alacritty | length) != 0 {
    ^alacritty msg create-window $flags
    if $nu.os-info.name == macos {
      osascript -e 'tell application "Alacritty" to activate'
    }
  } else {
    exec alacritty $flags
  }
}
